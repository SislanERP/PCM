<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2><%= t('type_of_devices') %></h2>
    <ol class="breadcrumb">
      <%= render 'common/breadcrumb_home' %>
      <li class="active">
        <strong><%= t('type_of_devices') %></strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2">

  </div>
</div><!-- END BreadCrumb -->
<div class="row">
  <div class="col-lg-12">
    <div class="wrapper wrapper-content animated fadeInRight">
      <div class="ibox">
        <div class="ibox-content">

        </div>
        <div class="row">
          <div class="col-lg-6">
            <div class="ibox-title">
              <div class="m-b-md">
                <%= link_to new_company_device_type_path(@company), class: "btn btn-primary pull-right" do %>
                  <i class="fa fa-plus-square"></i> <%= t('device_type_new') %>
                <% end %>
                <h4><%= t('type_of_devices') %></h4>
              </div>
            </div>
            <div class="ibox-content">
              <table id="table-devices_types" class="table table-striped table-bordered table-hover table-devices_types"  cellspacing="0" width="100%">
                <thead>
                  <tr>
                    <th><%= t('name') %></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <%= render @device_types %>
                </tbody>
              </table>
            </div> <!-- ibox-content table -->
          </div> <!-- col-lg-6 table device types-->
          <% if @device_type.present? %>
            <div class="col-lg-6">
              <div class="ibox-title">
                <div class="m-b-md">
                  <h4>
                    <%= "#{t('detail_of')}: #{@device_type.try(:name)}"%>
                  </h4>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <div class="ibox-content">
                    <div class="ibox-title">
                      <h4><%= t('devices_of_type') %></h4>
                    </div>
                    <div class="ibox-content">
                      <%= render(
                      partial: 'devices/other_devices',
                      locals: { devices: @devices}
                      )%>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <div class="ibox-content">
                    <div class="ibox-title">
                      <h4><%= t('master_plan_of_type') %></h4>
                    </div>
                    <div class="ibox-content">
                      <%= render(
                      partial: 'master_maintenance_plans/other_master_maintenance_plans',
                      locals: { master_maintenance_plans: @master_maintenance_plans}
                      )%>
                    </div>
                  </div>
                </div>
              </div>
            </div> <!-- col-lg-6 -->
          <% end %>
        </div>
      </div> <!-- ibox -->
    </div> <!-- wrapper wrapper-content animated fadeInRight -->
  </div> <!-- col-lg-12 -->
</div> <!-- row -->


<% content_for :javascript do %>

  <script type="text/javascript">

    $(function() {
      // DataTable
      $('#table-devices_types').DataTable({
        pageLength: 10,
        responsive: true,
        "language": {
          "url": "//cdn.datatables.net/plug-ins/1.10.12/i18n/Spanish.json"
        },

        dom: '<"html5buttons"B>lTfgitp',

        buttons: [
          {extend: 'csv',
          text: "<i class='fa fa-file-text-o'></i> CSV"
          },

          {extend: 'excel',
          text: "<i class='fa fa-file-excel-o'></i> Excel",
          title: "<%= t('type_of_devices') + ' ' + @company.try(:company_name)%>"
          },

          {extend: 'pdf',
          text: "<i class='fa fa-file-pdf-o'></i> PDF",
          title: "<%= t('type_of_devices') + ' ' + @company.try(:company_name)%>",
          orientation: 'portrait'
          },

          {extend: 'print',
          text: "<i class='fa fa-print'></i>",
          title: "<%= t('type_of_devices') + ' ' + @company.try(:company_name)%>",
          customize: function (win){
            // $(win.document.body).addClass('white-bg');
            // $(win.document.body).css('font-size', '10px');

            // $(win.document.body).find('table')
            // .addClass('compact')
            // .css('font-size', 'inherit');
            }
          }
        ]
      }); // end datatables

      // Sweet Alert
      $('.delete-device-type').click(function (event) {
        event.preventDefault();
        var link = $(this);
        swal(
          sweet_alert_warning,
          function () {
          var url = link.data("delete-device-type-url");
          $.ajax({
            method: "DELETE",
            dataType: "script",
            url: url
          });
        }); // end swal
      }); // end click delete-device-type
    });

  </script>

<% end %>
